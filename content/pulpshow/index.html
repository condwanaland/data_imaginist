<!DOCTYPE html><html><head><meta charset="utf-8"/><title>PULP</title></head><body style="margin:0;padding:0"><div id="db" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);"><canvas></canvas></div><script>function render_pulp(tokenData){let e=Math.PI,t=Math.round,r=Math.sin,o=Math.cos,l=Math.floor,a=Math.min,i=(e,t=0)=>Array(e).fill(0).map(((e,r)=>r+t)),s=(e,t)=>Array(t).fill(e),v=e=>e.length,f=(()=>{let e=0;return{s:t=>e=2*(1+l(t/50))*x,g:()=>e}})(),n=()=>f.g(),u=window.location.search,p=new URLSearchParams(u),x=p.get("grid");x=x?parseInt(x):1;let c=p.get("pos");c=c?parseInt(c):0;let h,m,w,d,g=Math.floor(c/x),b=c%x,y=window,_=p.get("width"),$=_?parseInt(_):y.innerHeight,P=_?1:y.devicePixelRatio;_=_?parseInt(_):y.innerWidth,h=Uint32Array.from([0,1,m=w=2,3].map((e=>parseInt(tokenData.hash.substr(8*e+2,8),16)))),d=()=>(w=h[3],h[3]=h[2],h[2]=h[1],h[1]=m=h[0],w^=w<<11,h[0]^=w^w>>>8^m>>>19,h[0]/4294967296);let A=(e=0,t=1)=>e+(t-e)*d(),C=(e,t)=>{let r,o,l,a,i=[],s=[],f=0,n=[...t];for(;f++<v(t);)s.push(f-1);for(;0<e--;)r=n.reduce(((e,t,r)=>[...e,t+(e[r-1]||0)]),[]),a=v(r)-1,o=A(0,r[a]),l=r.findIndex((e=>e>o)),l=0>l?a:l,i.push(s.splice(l,1)[0]),n.splice(l,1);return i},E=[[251,244,236],[241,172,52],[134,170,155],[135,164,191],[225,120,67],[29,29,29]].map((e=>e.map((e=>e/255))));C(1,s(1,v(E)-1))[0];let S=e=>e.toFixed(9),D=/\bHeadlessChrome/.test(navigator.userAgent)?1:4,I=2*A()*e;S(o(I)),S(r(I));let T=e=>`f fbm${e}(vv pos){f v=0.0;f m=1.0;for(int i=0;i<${e};i++){v+=sn(pos)*m;pos*=2.0;m*=0.5;}re v;}`,z=e=>`uniform sampler2D ${e};`,F="d ss smoothstep\nd vv vec2\nd vw vec3\nd ww vec4\nd f float\nd re return\nprecision highp float;".replace(/d/g,"#define")+"varying vv v_t;varying vv v_l;";simplex="vw mo(vw x){re x-floor(x*(1.0/289.0))*289.0;}vv mo(vv x){re x-floor(x*(1.0/289.0))*289.0;}vw pe(vw x){re mo(((x*34.0)+1e1)*x);}f sn(vv v){ww C=ww(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vv i=floor(v+dot(v,C.yy));vv x0=v-i+dot(i,C.xx);vv i1=(x0.x>x0.y)?vv(1.0,0.0):vv(0.0,1.0);ww x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mo(i);vw p=pe(pe(i.y+vw(0.0,i1.y,1.0))+i.x+vw(0.0,i1.x,1.0));vw m=max(0.5-vw(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vw x=2.0*fract(p*C.www)-1.0;vw h=abs(x)-0.5;vw ox=floor(x+0.5);vw a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vw g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;re 130.0*dot(m, g);}"+T(8)+T(6)+T(1);let M,k,B,U,L,R=F+z("u_t")+"uniform vv u_p;void main(){vv l=v_t*(1.0-u_p)+0.5*u_p;gl_FragColor=texture2D(u_t,l);}",H=(e,t,r)=>e.getUniformLocation(t,r),W=(e,t)=>e.bindTexture(3553,t),N=(e,t,r)=>e.texParameteri(3553,t,r),V=(e,t,r)=>{let o=e.createShader(r);return e.shaderSource(o,t),e.compileShader(o),o},j=(e,t,r)=>{let o=e.createProgram();e.attachShader(o,V(e,t,35633)),e.attachShader(o,V(e,r,35632)),e.linkProgram(o);let l=e.getAttribLocation(o,"a_p"),a=e.createBuffer();return e.bindBuffer(34962,a),e.bufferData(34962,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),35044),e.enableVertexAttribArray(l),e.vertexAttribPointer(l,2,5126,!1,0,0),o},q=e=>{let t=e.createTexture();return W(e,t),N(e,10242,33071),N(e,10243,33071),N(e,10241,9729),N(e,10240,9729),t},G=(e,r)=>{let o,l,a,i,f=[],n=[];.5>A()?(o=t(10*A())/10,f.push(o)):o=e[C(1,s(1,v(e)))[0]],.5>A()||4>v(e)?(l=t(10*A())/10,f.push(l)):l=e[C(1,s(1,v(e)))[0]],.5>A()?(a=t(10*A())/10,n.push(a)):a=r[C(1,s(1,v(r)))[0]],.5>A()||4>v(r)?(i=t(10*A())/10,n.push(i)):i=r[C(1,s(1,v(r)))[0]],o>l&&([o,l]=[l,o]),a>i&&([a,i]=[i,a]);let u=(l-o)*(i-a);return.05<u&&u<.3*A()?(e.concat(f),r.concat(n),[o,a,l,i]):G(e,r)},J=["rect","1bevel","2bevel","stripes","anglestripes","rounded","circles"],K=(e,t,r)=>{e.forEach((e=>{e[r]=2*t-e[r]}))},O=(e,t)=>{if(.5>A()){let r=t[0]+(t[2]-t[0])/2;e.forEach((e=>K(e,r,0)))}if(.5>A()){let r=t[1]+(t[3]-t[1])/2;e.forEach((e=>K(e,r,1)))}return e},Q=(e,t,r,o,l)=>{t.beginPath(),e.forEach((e=>{e.forEach(((e,a)=>{let[i,s]=((e,t,r,o,l)=>(t-=.5,[((e-=.5)*r[0]-t*r[1]+r[2]+.5)*o*.995+o/400+l,(e*r[1]+t*r[0]+r[3]+.5)*o*.995+o/400+l]))(e[0],e[1],r,o,l);a?t.lineTo(i,s):t.moveTo(i,s)})),t.closePath()}))},X=(e,t,r,o,l,a)=>{Q(e,t,o,l,a),t.fillStyle=r?"white":"#333333",t.fill(),t.strokeStyle="#333333",t.lineWidth=l/200,t.stroke()},Y=(e,t,r,o,l,a)=>{r&&(t.fillStyle="white",t.fill()),Q(e,t,o,l,a),t.fillStyle="#333333",t.fill()},Z=(t,l,i)=>{let s,v,f=t[2]-t[0],n=t[3]-t[1],u=a(f,n),p=[];[s,v]=1>l?[t[0],t[3]-u]:[t[2]-u,t[1]];for(let t=0;t<e/2+.002;t+=.01570796)p.push([r(t)*u+s,o(t)*u+v]);if([s,v]=1>l?[t[2],t[1]+u]:[t[0]+u,t[3]],2==i)for(let t=e;t<3*e/2+.002;t+=.01570796)p.push([r(t)*u+s,o(t)*u+v]);else 1>l?(p.push([t[2],t[1]]),p.push([t[0],t[1]])):(p.push([t[0],t[1]]),p.push([t[0],t[3]]));return O([p],t)},ee=e=>{let t=e[2]-e[0],r=e[3]-e[1];if(coords=[],.5>A()){let r=l(.7*t/.03),o=t-.03*r;coords.push([[e[0]-1/400,-1],[e[0]+o,-1],[e[0]+o,2],[e[0]-1/400,2]]);for(let t=0;t<r;t++){let l=.025-.02*t/(r-1),a=e[0]+o+.03*(t+1);coords.push([[a-l,-1],[a,-1],[a,2],[a-l,2]])}}else{let t=l(.7*r/.03),o=r-.03*t;coords.push([[-1,e[1]-1/400],[-1,e[1]+o],[2,e[1]+o],[2,e[1]-1/400]]);for(let r=0;r<t;r++){let l=.025-.02*r/(t-1),a=e[1]+o+.03*(r+1);coords.push([[-1,a-l],[-1,a],[2,a],[2,a-l]])}}return O(coords,e)},te=(t,i,s,v,f)=>{let u=n()/2;i.fillStyle="white",i.fillRect(0,0,v+2*u,f+2*u);let p=(()=>{let e=.01*(A()-.5),t=r(e),l=o(e),a=.001*(A()-.5),i=-.5*o(e)+.5*r(e)+.5+a,s=.001*(A()-.5);return[l,t,i,-.5*r(e)-.5*o(e)+.5+s]})();t.forEach(((v,f)=>{let n=!1;for(let e=0;e<f;e++)if(x=v,c=t[e],!(x[0]>c[2]||c[0]>x[2]||x[1]>c[3]||c[1]>x[3])){n=!0;break}var x,c;((t,i,s,v,f,n)=>{let u,p=(e=>(e[2]-e[0])/(e[3]-e[1]))(t),x=J[C(1,[1,.4,.4,.2,.2,.4,.3])[0]];((e,t,r,o,l)=>{Q([[[e[0]-1/400,e[1]-1/400],[e[2]+1/400,e[1]-1/400],[e[2]+1/400,e[3]+1/400],[e[0]-1/400,e[3]+1/400]]],t,r,o,l),t.save(),t.clip()})(t,s,f,v,n),"1bevel"===x?(u=Z(t,p,1),X(u,s,i,f,v,n)):"2bevel"===x?(u=Z(t,p,2),X(u,s,i,f,v,n)):"stripes"===x?(u=ee(t),Y(u,s,i,f,v,n)):"anglestripes"===x?(u=((e,t)=>{let r=e[2]-e[0],o=e[3]-e[1],l=a(r,o)+.005,i=[];if(1>t){i.push([[e[0]-1/400,e[1]-1/400],[e[2]+1/400,e[1]-1/400],[e[0]-1/400,e[1]-1/400+l]]);for(let t,r=0;r<(o-l)/.05;r++)t=.05*(r+1),i.push([[e[0]-1/400,e[1]-1/400+l+t],[e[0]-1/400,e[1]-1/400+l+t-.02],[e[2]+1/400,e[1]-1/400+t-.02],[e[2]+1/400,e[1]-1/400+t]])}else{i.push([[e[0]-1/400,e[1]-1/400],[e[0]-1/400,e[3]+1/400],[e[0]-1/400+l,e[1]-1/400]]);for(let t,o=0;o<(r-l)/.05;o++)t=.05*(o+1),i.push([[e[0]-1/400+l+t,e[1]-1/400],[e[0]-1/400+l+t-.02,e[1]-1/400],[e[0]-1/400+t-.02,e[3]+1/400],[e[0]-1/400+t,e[3]+1/400]])}return O(i,e)})(t,p),Y(u,s,i,f,v,n)):"rounded"===x?(u=((t,l)=>{let a=[];if(1<l){let l=(t[3]-t[1])/2,i=t[2]-l,s=t[1]+l;for(let t=0;t<e+.002;t+=.01570796)a.push([r(t)*l+i,o(t)*l+s]);a.push([t[0],t[1]]),a.push([t[0],t[3]])}else{let l=(t[2]-t[0])/2,i=t[0]+l,s=t[3]-l;for(let t=0;t<e+.002;t+=.01570796)a.push([o(t)*l+i,r(t)*l+s]);a.push([t[0],t[1]]),a.push([t[2],t[1]])}return O([a],t)})(t,p),X(u,s,i,f,v,n)):"circles"===x?(u=((t,i)=>{let s=t[2]-t[0],v=t[3]-t[1],f=a(s,v)/2,n=l(1>i?1/i:i),u=[],p=t[0]+f,x=t[1]+f;for(;n;){let t=[];for(let l=0;l<2*e;l+=.01570796)t.push([r(l)*f+p,o(l)*f+x]);u.push(t),1<i?p+=2*f:x+=2*f,n--}return O(u,t)})(t,p),X(u,s,i,f,v,n)):(u=(e=>[[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]])(t),X(u,s,i,f,v,n)),s.restore()})(v,n&&.5>A(),i,s,p,u)}))},re=(_/$>1?$:_)*P,oe=t(1*re),le=t(re/1),ae=re/1,ie=[],se=[],ve=document,fe=ve.getElementById("db");fe.getElementsByTagName("canvas")[0].remove(),(e=>{f.s(e)})(ae);let ne=n();M=ve.createElement("canvas"),k=ve.createElement("canvas"),U=M.getContext("webgl",{preserveDrawingBuffer:!0});let[ue,pe]=[oe+ne,le+ne];M.width=oe,M.height=le,k.width=ue,k.height=pe,M.style.width=oe/P+"px",M.style.height=le/P+"px",B=k.getContext("2d"),B.translate(-oe*b,-le*g);for(var xe=0;2>xe;xe++){let e=q(U);ie.push(e),U.texImage2D(3553,0,6408,ue,pe,0,6408,5121,null);let t=U.createFramebuffer();se.push(t),U.bindFramebuffer(36160,t),U.framebufferTexture2D(36160,36064,3553,e,0)}fe.prepend(M);let[ce,he]=[ne/ue,ne/pe],[me,we]=[oe/x,le/x],de=(()=>{let e=[0,1],t=[0,1],r=i(v(E)-1).map((()=>[G(e,t)]));return i(20).forEach((()=>r[C(1,i(v(r)).map((e=>e+1)).reverse())].push(G(e,t)))),r})();U.viewport(0,0,ue,pe),U.clearColor(0,0,0,0),U.clear(16384),L=q(U);let ge=((e,t,r,o,l,a)=>`attribute vec2 a_p;varying vec2 v_t;varying vec2 v_l;void main(){gl_Position=vec4(a_p*2.0-1.0,0,1);v_t=a_p;v_l=((a_p-0.5)*vec2(${S((me+ne/x)/me)},${S(a)})+0.5)*vec2(${S(r)},${S(o)})+vec2(${S(e)},${S(t)});}`)(me*b,we*g,me,we,0,(we+ne/x)/we),be=(e,t)=>{if(t!=v(E)){let r=((e,t,r,o)=>F+z("u_screen")+z("u_bg")+simplex+"void main(){"+`ww col=ww(${S(E[o][0])},${S(E[o][1])},${S(E[o][2])},1);`+(0===o?"gl_FragColor=col;":`ww fc=ww(0.0,0.0,0.0,0.0);ww xof=ww(1.0,3.0,-1.0,-3.0)/8.0;ww yof=ww(xof.yzw,xof.x);for(int i=0;i<${D};i++){vv pof=vv(xof[i],yof[i]);vv of=vv(${S(e)},${S(t)});vv pos=(v_l+pof)/${S(r)};f tex=fbm8(pos*200.0*${S(2)}+of)+fbm8(pos+of)/4.0;tex=(tex+1.9)/3.8+0.075;f sp=fbm6(pos*20.0+of);tex=min(tex,1.0-ss(1.3,1.4,sp));tex=max(tex,1.0-ss(-1.25,-1.15,sp));vv di=vv(fbm1((pos+of)*30.0),fbm1((pos+vv(0.0,1e4)+of)*30.0))/5000.0;f sc=texture2D(u_screen,v_t+di+pof/vv(${S(r)},${S(r)})).r;f g=1.0-ss(tex-0.15,tex,sc);ww bg=texture2D(u_bg,v_t);ww colm=col;colm.rgb=colm.rgb*g+1.0-g;colm.rgb*=bg.rgb;fc+=mix(colm,col,ww(g,g,g,1)*0.5)/${S(D)};}gl_FragColor=fc;`)+"}")(A(-1e4,1e4),A(-1e4,1e4),oe,t);t&&te(e[t-1],B,ae*x,oe*x,le*x);let o=j(U,ge,r);((e,t,r,o,l,a,i,s)=>{e.bindFramebuffer(36160,s),e.useProgram(t);var v=H(e,t,"u_r");e.uniform2f(v,r,o);let f=H(e,t,"u_screen"),n=H(e,t,"u_bg");e.uniform1i(f,0),e.uniform1i(n,1),e.activeTexture(33984),W(e,l),e.texImage2D(3553,0,6408,6408,5121,a),e.activeTexture(33985),W(e,i),e.drawArrays(4,0,6)})(U,o,oe,le,L,k,ie[0],se[1]),U.viewport(0,0,oe,le),((e,t,r,o,l)=>{let a=j(e,o,R);e.bindFramebuffer(36160,null),e.useProgram(a);let i=H(e,a,"u_p");e.uniform2f(i,t,r);let s=H(e,a,"u_t");e.uniform1i(s,0),e.activeTexture(33984),W(e,l),e.drawArrays(4,0,6)})(U,ce,he,ge,ie[1]),U.viewport(0,0,ue,pe),ie.reverse(),se.reverse(),U.readPixels(0,0,1,1,6408,5121,new Uint8Array(4)),setTimeout((()=>be(e,t+1)),500)}};be(de,0);};window.onload=()=>{const e=window.location.search,t=new URLSearchParams(e);let o=t.get("interval");o=o?parseInt(o):null;let a=t.get("background"),n=t.get("hash"),r="0x";for(var l=0;64>l;++l)r+=parseInt(Math.floor(16*Math.random())).toString(16);let d={hash:n||r,tokenId:1e3};a&&(document.body.style.backgroundColor=a),render_pulp(d),o&&setTimeout((()=>generate()),1e3*o)};</script></body></html>
