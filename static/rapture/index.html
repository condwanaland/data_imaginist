<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
  </head>
  <body>
    <canvas id="c" width="0" height="0" style="z-index:-1; background: #00000000; position:absolute; top:0; left:0; bottom:0; right:0; margin:auto;"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.min.js"></script>
    <script>
      function generate() {
        //generate a randomhash
        let h = "0x";
        for(var i = 0;i<64;++i){
            let n = parseInt(Math.floor(Math.random()*16));
            h+= n.toString(16);
        }
        let id= 6800000+parseInt(Math.random()*1000);
        var url = location.href;  // entire url including querystring - also: window.location.href;
        var baseURL = url.substring(0, url.indexOf('?'));
        window.location = baseURL+'?hash=' + h + '&tokenId='+id;
      }

      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      let hash = urlParams.get('hash');
      let tokenId = urlParams.get('tokenId');
      let tokenData = {"hash" : hash, "tokenId" : tokenId};
      console.log(tokenData);
      let time = Date.now();
    </script>
    <script>
      let t,s,i,e;t=Uint32Array.from([0,1,s=i=2,3].map((t=>parseInt(tokenData.hash.substr(8*t+2,8),16)))),e=()=>(i=t[3],t[3]=t[2],t[2]=t[1],t[1]=s=t[0],i^=i<<11,t[0]^=i^i>>>8^s>>>19,t[0]/4294967296);let r=(t=0,s=1)=>t+(s-t)*e(),a=(t,s)=>Math.floor(r(t,s+1)),p=(t,s)=>{let h,i,e,a=[],p=[],n=0,l=[...s];for(;n++<s.length;)p.push(n-1);for(;0<t--;)h=l.reduce(((t,s,h)=>[...t,s+(t[h-1]||0)]),[]),i=r(0,h[h.length-1]),e=h.findIndex((t=>t>i)),e=0>e?h.length-1:e,a.push(p.splice(e,1)[0]),l.splice(e,1);return a},n=[a(0,1e9),a(0,1e9)],l=.3>r(),o=r(),c=.1>o?.02:.9>o?.05:.08,f=l||.1>o?750:.9>o?500:250,u=r(),d=.05>u?3:1,y=.95<u?3:1,x=p(1,[48,48,4])[0],I=p(1,[1,1,1,1])[0]*Math.PI/2+(.25>r()?Math.PI/4:0),P=p(1,[7,30,20,10,3,20,10])[0],q=r(),m=p(6,[2,3,3,3,1,2]),w=.7>r(),v=p(1,[30,60,1,1,8])[0],E=p(a(2,6),[1,1,1,1,1,1]),b=p(1,[30,60,10])[0],k=p(1,[60,35,5])[0],D=.1>r(),S=.9>r();class T{constructor(t,s){this.x=t,this.y=s}d(t){let s=this.x-t.x,h=this.y-t.y;return sqrt(s*s+h*h)}s(t){return this.x-=t.x,this.y-=t.y,this}a(t){return this.x+=t.x,this.y+=t.y,this}t(t,s){return this.x+=t,this.y+=s,this}m(t){return this.x*=t,this.y*=t,this}cp(){return new T(this.x,this.y)}}class _{constructor(t){this.h=!1,this.p=t,this.a=[]}o(t){return this.h=t,this}ap(t,s){return this.a.push(new T(t,s)),this}t(t=1,s=0,h=0){return this.a.forEach((i=>{i.x=i.x*t+s,i.y=i.y*t+h})),this}rot(t){let s=sin(t),h=cos(t);return this.a.forEach((t=>{let i=t.x*h-t.y*s,e=t.x*s+t.y*h;t.x=i,t.y=e})),this}ad(t){if(2>this.a.length)return;let s,h,i,e,r,a,p,n,l=[];for(p=0;p<this.a.length;p++)if(s=p==this.a.length-1?0:p+1,h=this.a[p],l.push(h),i=this.a[s],e=h.d(i),!(t>=e))for(r=ceil(e/t),a=i.cp().s(h).m(1/r),n=0;n<r-1;n++)h=h.cp().a(a),l.push(h);return this.a=l,this}rd(t){if(3>this.n)return;let s,h=this.a[0],i=[h];for(s=1;s<this.a.length;s++)t<=h.d(this.a[s])&&(h=this.a[s],i.push(h));return this.a=i,this}cp(){let t=new _(this.p);return t.a=this.a.map((t=>t.cp())),t.h=this.h,t}}let W=(t,s)=>new _(t,s),$=(t,s)=>{let h=new p5;return h.noiseSeed(t),h.noiseDetail(4,.5),(t,i)=>h.noise((t+5e5)*s,(i+5e5)*s)},A=2147483647,O=t=>1664525*t+1013904223&A,R=1/(A+1),C=(t,s)=>16777619*(16777619*(2166136261^t)^s)&A,H=(t,s,h)=>{var i=Math.floor;let e,r,a,p,n,l,o,c,f,u,g=1e9;for(o=-1;2>o;o++)for(c=-1;2>c;c++)for(n=i(t)+o,l=i(s)+c,e=O(C(n+h&A,l+h&A)),d=e,r=196662675>(d&=A)?1:511322955>d?2:930869995>d?3:1350417036>d?4:1686054668>d?5:1909813089>d?6:2037675044>d?7:2101606022>d?8:9,f=0;f<r;++f)e=O(e),a=e*R+n-t,e=O(e),p=e*R+l-s,u=a*a+p*p,u<g&&(g=u);var d;return g},U=t=>(s,h)=>{let i=.01,e=1,r=0,a=4;for(;a--;)r+=H(s*i,h*i,t)*e,i*=2,e*=.5;return r},j=(t,s,h,i,e)=>new T(-(i(t,s+e)-i(t,s-e))/(2*e),(h(t+e,s)-h(t-e,s))/(2*e));class z{constructor(t,s,h){this.p=[],this.at=[...s],t.forEach((t=>this.p.push(this.rgb_ok(t)))),this.f=h,this.ps=new p5}ca(t,s=!1,h=!0){t=this.f?t**.5:((t,s=.01)=>t<s?0:(t-s)/(1-s))(t);let i,e,r=1;for(;r<this.at.length-1&&this.at[r]<=t;)r++;return e=(t-this.at[r-1])/(this.at[r]-this.at[r-1]),e=1>e?0<e?e:0:1,i=this.ok_rgb([this.ps.lerp(this.p[r-1][0],this.p[r][0],e),this.ps.lerp(this.p[r-1][1],this.p[r][1],e),this.ps.lerp(this.p[r-1][2],this.p[r][2],e)]),h?(i.push(s?1:1-((t,s=3,h=1/16)=>t<h?h*t/(t+s*(h-t)):(1-h)*(t-1)/(1-t-s*(h-t))+1)(t)),`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${i[3]})`):i}rgb_ok(t){var s=Math.cbrt;let h=s(.4122214708*t[0]+.5363325363*t[1]+.0514459929*t[2]),i=s(.2119034982*t[0]+.6806995451*t[1]+.1073969566*t[2]),e=s(.0883024619*t[0]+.2817188376*t[1]+.6299787005*t[2]);return[.2104542553*h+.793617785*i-.0040720468*e,1.9779984951*h-2.428592205*i+.4505937099*e,.0259040371*h+.7827717662*i-.808675766*e]}ok_rgb(t){let s=(t[0]+.3963377774*t[1]+.2158037573*t[2])**3,h=(t[0]-.1055613458*t[1]-.0638541728*t[2])**3,i=(t[0]-.0894841775*t[1]-1.291485548*t[2])**3;return[4.0767416621*s-3.3077115913*h+.2309699292*i,-1.2684380046*s+2.6097574011*h-.3413193965*i,-.0041960863*s-.7034186147*h+1.707614701*i]}}let B=(t,s,h=!1)=>new z(t,s,h);var F=t=>{let s=[239,241,220],h=[52,51,50],i=[[[244,200,5],[240,182,5],[200,142,5]],[[225,139,117],[201,75,64],[152,51,42]],[[151,176,201],[62,111,182],[57,81,116]],[[156,201,149],[72,161,77],[62,106,64]],[[237,169,182],[235,97,143],[144,74,97]],[[191,151,190],[130,77,147],[95,56,107]]],e=B(1==v?[i[m[0]][2],i[m[0]][0]]:w?[h,s]:[s,h],[0,1],!0),r=t=>{let e=[s,...i[m[b?t:0]],h];return w&&e.reverse(),B(e,[0,.1,.4,.7,1])},a=t=>B([i[m[b?t:1]][2],i[m[b?t:1]][1],i[m[0]][1],i[m[0]][0]],[0,.33,.67,1]);if(2==v)return Array(t+1).fill(e);if(3==v)return[...Array(t).fill((t=>{let e=[s,...E.map((t=>i[t][1])),h];w&&e.reverse();let r=[0],a=0,p=1/(e.length-1);for(;a<1-p/2;)r.push(a+=p);return B(e,r)})()),e];if(4==v&&2<t)return[...(t=>{let e=[s,i[m[0]][1],h];w&&e.reverse();let r=e[2],a=B(e,[-.2,.5,1.2],!0),p=[];for(let s=0;1>=s;s+=1/(t-1))p.push(B([a.ca(s,!0,!1),r],[0,1]));return p})(t),e];let p=1==v?[a(1),a(2),a(3),a(4),a(5)]:[r(0),r(1),r(2),r(3),r(4)];return 1==b&&(p=p.map(((t,s)=>p[s%2]))),[...p.slice(0,t),e]};let G=document.querySelector("canvas"),J=G.getContext("2d"),K=l?U(n[0]):$(n[0],c/d),L=l?U(n[1]):$(n[1],c/y),N=(()=>{var t=Math.PI,s=Math.asin;let i=2==x?70.71068:50,e=(t,s)=>[...t,...s.splice(1,s.length-1)],a=t=>W(t).ap(-i,-50).ap(i,-50).ap(i,50).ap(-i,50),p=(t,s=15)=>W(t).ap(-s,-s).ap(s,-s).ap(s,s).ap(-s,s),n=t=>{var s=Math.sqrt;let h,i=[],e=0;for(;5>i.length;){let t=35*s(r()),a=r()*TWO_PI;h=new T(cos(a)*t,sin(a)*t),(50<e++||i.map((t=>25<t.d(h))).reduce(((t,s)=>t&&s),!0))&&i.push(h)}return i.map(((s,h)=>t[h].t(1,s.x,s.y)))};return g=15*(1-q),h=s(.05+q/2.5),ci=(t,s=17.5)=>{let h,i=W(t);for(h=0;h<TWO_PI;h+=PI/200)i.ap(cos(h)*s,sin(h)*s);return i},sh4=s=>[a(s[4].p),s[0],s[1].rot(t/2),s[2].rot(Math.PI),s[3].rot(3*t/2)],sq1=t=>[a(t[1]),p(t[0],25),ci(t[0],7+g).o(!0)],sq2=t=>[a(t[1]),p(t[0],25),p(t[0],7+g).o(!0)],sq3=t=>[a(t[2]),p(t[0],25),p(t[0],14+.6*g).o(!0),p(t[1],12.5-.6*g)],sq4=t=>sh4(t.map((t=>W(t,!0).ap(7.5+g,25).ap(-7.5-g,25).ap(0,17.5-g)))),sq5=t=>[a(t[5]),...n([,,,,,].fill(0).map(((s,h)=>p(t[h],10))))],sq2a=t=>[a(t[2]),W(t[0]).ap(-25,-25).ap(5+g,-25).ap(-25,5+g),W(t[1]).ap(25,25).ap(-5-g,25).ap(25,-5-g)],sq3a=t=>[a(t[3]),W(t[0]).ap(-25,-25).ap(-10+g,-25).ap(-25,-10+g),W(t[1]).ap(25,-25).ap(25,-20+g).ap(-20+g,25).ap(-25,25).ap(-25,20-g).ap(20-g,-25),W(t[2]).ap(25,25).ap(10-g,25).ap(25,10-g)],ci1=t=>[a(t[1]),ci(t[0],30),p(t[0],5+g).o(!0)],ci2=t=>[a(t[1]),ci(t[0],30),ci(t[0],12.5+g).o(!0)],ci3=t=>[a(t[2]),ci(t[0],30),ci(t[0],17+.7*g).o(!0),ci(t[1],15-.7*g)],ci4=t=>sh4(t.map((t=>{let s,i=W(t,!0).ap(30*cos(PI/2-h),30*sin(h));for(s=h;s<=PI/2-h;s+=(PI/2-2*h)/50)i.ap(30*cos(s),30*sin(s));return i}))),ci5=t=>[a(t[5]),...n([,,,,,].fill(0).map(((s,h)=>ci(t[h],12))))],ci2a=t=>{let s,i=W(t[0]),e=W(t[1]);for(s=h;s<=PI-h;s+=(PI-2*h)/100)i.ap(30*cos(s),30*sin(s)),e.ap(30*cos(s),30*sin(s));return[a(t[2]),i,e.rot(PI)]},ci3a=t=>{let h,i=W(t[0]),e=W(t[1]),r=W(t[2]),p=.3*q,n=s(.45+p);for(h=n;h<PI-n+(PI-2*n)/100;h+=(PI-2*n)/50)i.ap(30*cos(h),30*sin(h)),r.ap(30*cos(h),30*sin(h));for(n=asin(.45-p),h=PI-n;h<PI+n+n/50;h+=n/25)e.ap(30*cos(h),30*sin(h));for(h=-n;h<n+n/50;h+=n/25)e.ap(30*cos(h),30*sin(h));return[a(t[3]),i,e,r.rot(PI)]},0===P?2==x?e(ci1(F(1)),sq1(F(1))):x?ci1(F(1)):sq1(F(1)):1===P?2==x?e(ci2(F(1)),sq2(F(1))):x?ci2(F(1)):sq2(F(1)):2===P?2==x?e(ci3(F(2)),sq3(F(2))):x?ci3(F(2)):sq3(F(2)):3===P?2==x?e(ci4(F(4)),sq4(F(4))):x?ci4(F(4)):sq4(F(4)):4===P?2==x?e(ci5(F(5)),sq5(F(5))):x?ci5(F(5)):sq5(F(5)):5===P?2==x?e(ci2a(F(2)),sq2a(F(2))):x?ci2a(F(2)):sq2a(F(2)):6===P?2==x?e(ci3a(F(3)),sq3a(F(3))):x?ci3a(F(3)):sq3a(F(3)):void 0})(),Q=window,V=Q.innerWidth,X=Q.innerHeight,Y=2==x?1.414214:1,Z=V/X>Y,tt=Q.devicePixelRatio;DIM=(Z?X:V)*tt,M=DIM/(100*(Z?1:Y)),G.width=cw=Math.round(DIM*(Z?Y:1)),G.height=ch=Math.round(DIM/(Z?1:Y)),G.style.width=cw/tt+"px",G.style.height=ch/tt+"px",N.forEach(((t,s)=>t.rot(s?I:0))),2==x&&(N.forEach(((t,s)=>t.t(1,s?34*(.5<s/N.length?-1:1):0))),.5>r()&&N.forEach((t=>t.rot(PI))));let st=new class{constructor(t){this.p=t.map((t=>[t]))}f(t,s,h,i,e){this.p.forEach(((r,a)=>{let p,n,l=r[r.length-1].cp().ad(h);for(p=0;p<t;p++){for(n=0;n<s;n++)a&&l.ad(h),l.a.forEach((t=>t.a(j(t.x,t.y,i,e,.1))));a&&1==p%2&&l.rd(h),r.push(l.cp().rd(a?h:0))}}))}t(t,s,h){this.p.forEach((i=>i.forEach((i=>i.t(t,s,h)))))}sp(t,s,h,i,e,r){s.moveTo(t[0].x,t[0].y);for(let h=1;h<t.length;h++)s.lineTo(t[h].x,t[h].y);s.strokeStyle=h,s.lineWidth=e,s.fillStyle=i,s.closePath(),r?s.stroke():s.fill("evenodd")}dp(t,s,h,i,e=!1){let r=t[0].p.ca(s/(t.length-2));h.beginPath(),this.sp(t[s].a,h,r,r,i/50,!0),this.sp(t[s+1].a,h,r,r,i/50,!1),e&&D&&(h.beginPath(),this.sp(t[s].a,h,t[0].p.ca(1,!0),r,i/5,!0))}df(t,s=0){1==this.p.length||this.p[1][0].h,this.p.forEach(((h,i)=>{let e,r=h[Math.floor(s*(h.length-2))].a;for(h[0].h||t.beginPath(),t.moveTo(r[0].x,r[0].y),e=1;e<r.length;e++)t.lineTo(r[e].x,r[e].y);t.closePath(),t.fillStyle=h[0].p.ca(0,!0),i!=this.p.length-1&&this.p[i+1][0].h||t.fill("evenodd")}))}d(t,s,h,i){this.t(i,s/2,h/2),t.fillStyle=this.p[0][0].p.ca(1,!0),t.fillRect(0,0,s,h);let e,r=this.p[0].length-1,a=this.p.shift();if(1==k&&(this.df(t),this.df(t,.01)),S)for(e=r-1;0<=e;e--)this.dp(a,e,t,i);for(r=this.p[0].length-1,e=r-1;0<=e;e--)this.p.forEach((s=>this.dp(s,e,t,i,0==e%20)));0==k&&(this.df(t),this.df(t,.01))}}(N);st.f(f,4,2==x?.3:.2,K,L),st.d(J,cw,ch,M);
    </script>
    <button id="generate" onclick="generate()">generate new hash</button>
  </body>
</html>
