<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
  </head>
  <body style="margin:0;padding:0">
    <div><canvas></canvas></div>
    <script>let v,e,t,i,c,d,f,o,r,p,n,s,w=Math.round,g=(v,e,t)=>{let i=v.createShader(t);return v.shaderSource(i,e),v.compileShader(i),i},x=v=>v.toFixed(9),l="#version 300 es\n#define ss smoothstep\n#define vv vec2\n#define vw vec3\n#define f float\n#define le length\n#define re return\nprecision highp float;",a=v=>`${v} vv v_t;${v} vv v_l;${v} f w1s;${v} f c1d;${v} vv c2p;${v} f t1s;${v} mat2 t1r;${v} vv c3p;${v} f c3s;${v} vv c4p;${v} f c4s;${v} vv c5p;${v} f c5s;${v} vv c6p;${v} f c6s;`,m=l+a("in")+"out vec4 v_c;uniform f u_t;",y="f sn(vv x,vv p,f a,out vv g){vv uv=vv(x.x+x.y*0.5,x.y);vv i0=floor(uv),f0=fract(uv);f cmp=step(f0.y,f0.x);vv o1=vv(cmp,1.0-cmp);vv i1=i0+o1,i2=i0+1.0;vv v0=vv(i0.x-i0.y*0.5,i0.y);vv v1=vv(v0.x+o1.x-o1.y*0.5,v0.y+o1.y);vv v2=vv(v0.x+0.5,v0.y+1.0);vv x0=x-v0,x1=x-v1,x2=x-v2;vw iu,iv,xw,yw;if(any(greaterThan(p,vv(0.0)))){xw=vw(v0.x,v1.x,v2.x);yw=vw(v0.y,v1.y,v2.y);if(p.x>0.0)xw=mod(vw(v0.x,v1.x,v2.x),p.x);if(p.y>0.0)yw=mod(vw(v0.y,v1.y,v2.y),p.y);iu=floor(xw+0.5*yw+0.5);iv=floor(yw+0.5);}else{iu=vw(i0.x,i1.x,i2.x);iv=vw(i0.y,i1.y,i2.y);}vw h=mod(iu,289.0);h=mod((h*51.0+2.0)*h+iv,289.0);h=mod((h*34.0+10.0)*h,289.0);vw psi=h*0.07482+a;vw gx=cos(psi);vw gy=sin(psi);vv g0=vv(gx.x,gy.x);vv g1=vv(gx.y,gy.y);vv g2=vv(gx.z,gy.z);vw w=max(0.8-vw(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vw w2=w*w;vw w4=w2*w2;vw gdx=vw(dot(g0,x0),dot(g1,x1),dot(g2,x2));f n=dot(w4,gdx);vw w3=w2*w;vw dw=-8.0*w3*gdx;vv dn0=w4.x*g0+dw.x*x0;vv dn1=w4.y*g1+dw.y*x1;vv dn2=w4.z*g2+dw.z*x2;g=10.9*(dn0+dn1+dn2);re 10.9*n;}",b=(v,e)=>{return`f fbm${t=v,t.length}(vv p,f a,vv pe,out vv g){f v=0.0;g=vv(0.0,0.0);vv gr;f m;`+((v,e)=>v.map(((v,t)=>`m=${x(e[t])};v+=sn(p*${x(v)},pe,a,gr)/m;g+=gr/m;`)).join(""))(v,e)+"re v;}";var t},u=[244,241,222,111,45,118,129,178,154,196,76,43,237,175,184,238,127,58,153,182,234,255,221,128,53,67,135].map((v=>x(v/255))),h=`vw get_col(int col){vw cols[9]=vw[9](vw(${u.slice(0,3)}),vw(${u.slice(3,6)}),vw(${u.slice(6,9)}),vw(${u.slice(9,12)}),vw(${u.slice(12,15)}),vw(${u.slice(15,18)}),vw(${u.slice(18,21)}),vw(${u.slice(21,24)}),vw(${u.slice(24,27)}));re cols[col];}`,_=window,$=document,q=()=>{v=_.devicePixelRatio,e=_.innerWidth*v,t=_.innerHeight*v,i=e/t,c=2/3,d=i>c,f=d?t:e,o=w(f*(d?c:1)),r=w(f/(d?1:c)),p.width=e,p.height=t,p.style.width=e/v+"px",p.style.height=t/v+"px",n.viewport(0,0,e,t),n.clearColor(0,0,0,1),n.clear(16384)},z=()=>{let v=((v,e,t,i)=>l+y+b([1],[1])+"in vv a_p;"+a("out")+"uniform f u_t;void main(){gl_Position=vec4(a_p*2.0-1.0,0,1);v_t=a_p;"+`v_l=a_p*vv(${x(v)},${x(e)})-vv(${x(t)},${x(i)});vv g;c1d=fbm1(vv(0.0,u_t*1e-3),0.0,vv(1e3,1e3),g);c1d=ss(0.0,1.0,c1d);c2p=vv(fbm1(vv(1e1,u_t*1e-4),0.0,vv(1e2,1e2),g),fbm1(vv(2e1,u_t*1e-4),0.0,vv(1e2,1e2),g));c2p=pow(abs(c2p),vv(0.75,1.0))*sign(c2p)*vv(0.4,0.65)+vv(0.5,0.75);t1s=1.0/(fbm1(vv(3e1,u_t*1e-4),0.0,vv(1e2,1e2),g)*0.5+1.5);g/=le(g);t1r=mat2(g.x,-g.y,g.y,g.x)*mat2(t1s,0.0,0.0,t1s);w1s=pow(fbm1(vv(4e1,u_t*1e-4),0.0,vv(1e2,1e2),g)*0.5+0.5,2.0)*9.0+1.0;c3s=ss(0.0,0.25,fbm1(vv(5e1,u_t*1e-4),0.0,vv(1e2,1e2),g));c3p=0.75*g/le(g)+vv(0.5,0.75);c4s=ss(0.0,0.25,fbm1(vv(6e1,u_t*1e-4),0.0,vv(1e2,1e2),g));c4p=0.75*g/le(g)+vv(0.5,0.75);c5s=ss(0.0,0.25,fbm1(vv(7e1,u_t*1e-4),0.0,vv(1e2,1e2),g));c5p=1.2*g/le(g)+vv(0.5,0.75);c6s=ss(0.0,0.25,fbm1(vv(8e1,u_t*1e-4),0.0,vv(1e2,1e2),g));c6p=1.5*g/le(g)+vv(0.5,0.75);}`)(e,t,(e-o)/2,(t-r)/2),i=(v=>m+y+b([1,2,4,8],[1,2,4,8])+b([1,2],[1,2])+b([1],[1])+"f th=0.33333333;vw rtl(vw c){vw x=pow(vw(0.4122214708,0.2119034982,0.0883024619)*c.rrr+vw(0.5363325363,0.6806995451,0.2817188376)*c.ggg+vw(0.0514459929,0.1073969566,0.6299787005)*c.bbb,vw(th,th,th));re vw(0.2104542553,1.9779984951,0.0259040371)*x.rrr+vw(0.7936177850,-2.4285922050,0.7827717662)*x.ggg+vw(-0.0040720468,0.4505937099,-0.8086757660)*x.bbb;}vw ltr(vw c){vw x=c.rrr+vw(0.3963377774,-0.1055613458,-0.0894841775)*c.ggg+vw(0.2158037573,-0.0638541728,-1.2914855480)*c.bbb;x=x*x*x;re vw(4.0767416621,-1.2684380046,-0.0041960863)*x.rrr+vw(-3.3077115913,2.6097574011,-0.7034186147)*x.ggg+vw(0.2309699292,-0.3413193965,1.7076147010)*x.bbb;}f cir(vv p,vv l,f r){re le(p-l)-r;}f sq(vv p,vv l,vv b){vv d=abs(p-l)-b;re le(max(d,0.0))+min(max(d.x,d.y),0.0);}f tri(vv p,vv p0,vv p1,vv p2){vv e0=p1-p0,e1=p2-p1,e2=p0-p2;vv v0=p-p0,v1=p-p1,v2=p-p2;vv pq0=v0-e0*clamp(dot(v0,e0)/dot(e0,e0),0.0,1.0);vv pq1=v1-e1*clamp(dot(v1,e1)/dot(e1,e1),0.0,1.0);vv pq2=v2-e2*clamp(dot(v2,e2)/dot(e2,e2),0.0,1.0);f s=sign(e0.x*e2.y-e0.y*e2.x);vv d=min(min(vv(dot(pq0,pq0),s*(v0.x*e0.y-v0.y*e0.x)),vv(dot(pq1,pq1),s*(v1.x*e1.y-v1.y*e1.x))),vv(dot(pq2,pq2),s*(v2.x*e2.y-v2.y*e2.x)));re -sqrt(d.x)*sign(d.y);}int uc(int cur,int new){int lu[81]=int[](0,1,2,3,4,5,6,7,8,1,0,5,7,6,8,2,3,4,2,5,0,6,7,8,2,3,4,3,5,6,0,8,4,2,3,7,4,5,6,7,0,8,2,3,4,5,1,6,2,3,0,4,8,7,6,5,6,7,8,2,0,3,4,7,5,6,7,2,8,3,0,4,8,5,1,7,6,2,3,4,0);re lu[cur*9+new];}"+h+"f smin(f a,f b,f k){f h=max(k-abs(a-b),0.0)/k;re min(a, b)-h*h*k*(1.0/4.0);}void main(){vec4 fc=vec4(0.0,0.0,0.0,1.0);vec4 xof=vec4(1.0,3.0,-1.0,-3.0)/8.0;vec4 yof=vec4(xof.yzw,xof.x);vv g;for(int i=0;i<4;i++){"+`vv p=(v_l+vv(xof[i],yof[i]))/${x(v)};f n=fbm2(p*2e2,0.0,vv(0.0,0.0),g);vv dp=g*2e-4;int col=0;f d=1e3;f td=0.0;vv p2=(p-vv(0.5,0.75))/w1s;n=fbm2((vv(p2.x,u_t*1e-4)+dp/w1s)*1.5,0.0,vv(0.0,1e2),g);if(p2.y>n*0.25){col=uc(col,8);}if(mod(pow(abs(n*0.25-p2.y)+0.35,4.0)*20.0,1.0)>0.9&&abs(n*0.25-p2.y)<0.3){col=col==0?8:0;}f t_off=0.0;td=sq(p+dp,vv(0.5,0.75),vv(0.1,0.6));if(td<=0.0){col=uc(col,1);d=smin(d*2.0,abs(td*1.75),0.05);t_off=1.0;}n=fbm2(p*10.0-u_t*0.01,0.0,vv(1e4,1e4),g);td=cir(p+dp+g*0.01*c1d,vv(0.275,0.275),0.25);if(td<=0.0){col=uc(col,2);d=smin(d*2.0,abs(td),0.05);}td=cir(p+dp,c2p,0.09);if(td<=0.0){col=uc(col,3);d=smin(d*2.0,abs(td*2.0),0.05);}td=tri(t1r*(p-vv(0.7667,1.2))+t1r*dp,vv(-0.2167,0.0),vv(0.1833,-0.2),vv(0.03333,0.2));if(td<=0.0){col=uc(col,4);d=smin(d*2.0,abs(td*1.75),0.05);}td=cir(p+dp,c3p,1.0);if(td<=0.0){d=smin(d,abs(td*2.0)+0.15*c3s,0.05);}td=cir(p+dp,c4p,0.75);if(td<=0.0){d=smin(d,abs(td*2.0)+0.15*c4s,0.05);}td=cir(p+dp,c5p,1.5);if(td<=0.0){d=smin(d,abs(td*2.0)+0.15*c5s,0.05);}td=cir(p+dp,c6p,1.3);if(td<=0.0){d=smin(d,abs(td*2.0)+0.15*c6s,0.05);}n=fbm4(p*vv(12e1,3e2),0.0,vv(0.0,0.0),g);vw N=normalize(vw(g,1.0));vw L=normalize(vw(0.0,0.75,1.0));f s=dot(N,L);vw fcol=rtl(get_col(col));fcol.r+=pow(s,3.0)*0.03;s=0.0;f fd=1.0-pow(1.0-clamp(d,0.0,0.16)*6.25,2.0);n=fbm4(p*3e2+f(col)*1e3+vv(0.0,u_t*t_off),0.0,vv(1e6,1e6),g);n=(n+1.9)/3.8;f l=1.0-ss(n-0.15,n,fd-0.3);s=max(l*0.025,s);n=fbm4(p*3e2+f(col)*5e3+vv(0.0,u_t*t_off*0.5),0.0,vv(5e5,5e5),g);n=(n+1.9)/3.8;l=1.0-ss(n-0.15,n,fd-0.05);s=max(l*0.05,s);n=fbm4(p*3e2-f(col)*1e4+vv(0.0,u_t*t_off*0.25),0.0,vv(25e4,25e4),g);n=(n+1.9)/3.8;l=1.0-ss(n-0.15,n,fd+0.2);s=max(l*0.1,s);fc.r-=s;fc.rgb+=fcol/4.0;}fc.rgb=ltr(fc.rgb);v_c=fc;}`)(o);s=((v,e,t)=>{let i=v.createProgram();v.attachShader(i,g(v,e,35633)),v.attachShader(i,g(v,t,35632)),v.linkProgram(i);let c=v.getAttribLocation(i,"a_p"),d=v.createBuffer();return v.bindBuffer(34962,d),v.bufferData(34962,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),35044),v.enableVertexAttribArray(c),v.vertexAttribPointer(c,2,5126,!1,0,0),i})(n,v,i)};_.onload=()=>{p=$.getElementsByTagName("canvas")[0],n=p.getContext("webgl2",{preserveDrawingBuffer:!0}),q(),z();let v=()=>{((v,e,t)=>{v.useProgram(e);let i=((v,e,t)=>v.getUniformLocation(e,"u_t"))(v,e);v.uniform1f(i,t),v.drawArrays(4,0,6)})(n,s,Date.now()/1e3%1e6),requestAnimationFrame(v)};requestAnimationFrame(v)},_.onresize=()=>{q(),z()};</script>
  </body>
</html>
