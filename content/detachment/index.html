<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
  </head>
  <body style="margin:0;padding:0">
    <div style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);"><canvas></canvas></div>
    <script>let e,c,t=Math.round,v=window,o=v.innerWidth,i=v.innerHeight,s=v.devicePixelRatio,l=(e,c,t)=>{let v=e.createShader(t);return e.shaderSource(v,c),e.compileShader(v),v},r=e=>e.toFixed(9),a=(e,c)=>{return`float fbm${t=e,t.length}(vec2 p, float a,out vec2 g){float v=0.0;g=vec2(0.0,0.0);vec2 gr;float m;`+((e,c)=>e.map(((e,t)=>`m=${r(c[t])};v+=sn(p*${r(e)},vec2(1e6,1e6),a,gr)/m;g+=gr/m;`)).join(""))(e,c)+"return v;}";var t},n=[244,241,222,111,45,118,129,178,154,196,76,43,237,175,184,238,127,58,153,182,234,255,221,128,199,129,181].map((e=>r(e/255))),f=`vec3 get_col(int col){vec3 cols[9]=vec3[9](vec3(${n.slice(0,3)}),vec3(${n.slice(3,6)}),vec3(${n.slice(6,9)}),vec3(${n.slice(9,12)}),vec3(${n.slice(12,15)}),vec3(${n.slice(15,18)}),vec3(${n.slice(18,21)}),vec3(${n.slice(21,24)}),vec3(${n.slice(24,27)}));return cols[col];}`,d=2/3,p=o/i>d,x=(p?i:o)*s,g=t(x*(p?d:1)),m=t(x/(p?1:d)),_=document;v.onload=()=>{e=_.getElementsByTagName("canvas")[0],c=e.getContext("webgl2",{preserveDrawingBuffer:!0}),e.width=g,e.height=m,e.style.width=g/s+"px",e.style.height=m/s+"px",c.viewport(0,0,g,m),c.clearColor(0,0,0,1),c.clear(16384);let t=(n=m,`#version 300 es\nin vec2 a_p;out vec2 v_t;out vec2 v_l;void main(){gl_Position=vec4(a_p*2.0-1.0,0,1);v_t=a_p;v_l=a_p*vec2(${r(g)},${r(n)});}`),v=(e=>"#version 300 es\nprecision highp float;in vec2 v_t;in vec2 v_l;out vec4 v_c;uniform float u_t;float sn(vec2 x,vec2 p,float a,out vec2 g){vec2 uv=vec2(x.x+x.y*0.5,x.y);vec2 i0=floor(uv),f0=fract(uv);float cmp=step(f0.y,f0.x);vec2 o1=vec2(cmp,1.0-cmp);vec2 i1=i0+o1,i2=i0+1.0;vec2 v0=vec2(i0.x-i0.y*0.5,i0.y);vec2 v1=vec2(v0.x+o1.x-o1.y*0.5,v0.y+o1.y);vec2 v2=vec2(v0.x+0.5,v0.y+1.0);vec2 x0=x-v0,x1=x-v1,x2=x-v2;vec3 iu,iv,xw,yw;if(any(greaterThan(p,vec2(0.0)))){xw=vec3(v0.x,v1.x,v2.x);yw=vec3(v0.y,v1.y,v2.y);if(p.x>0.0)xw=mod(vec3(v0.x,v1.x,v2.x),p.x);if(p.y>0.0)yw=mod(vec3(v0.y,v1.y,v2.y),p.y);iu=floor(xw+0.5*yw+0.5);iv=floor(yw+0.5);}else{iu=vec3(i0.x,i1.x,i2.x);iv=vec3(i0.y,i1.y,i2.y);}vec3 h=mod(iu,289.0);h=mod((h*51.0+2.0)*h+iv,289.0);h=mod((h*34.0+10.0)*h,289.0);vec3 psi=h*0.07482+a;vec3 gx=cos(psi);vec3 gy=sin(psi);vec2 g0=vec2(gx.x,gy.x);vec2 g1=vec2(gx.y,gy.y);vec2 g2=vec2(gx.z,gy.z);vec3 w=max(0.8-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec3 w2=w*w;vec3 w4=w2*w2;vec3 gdx=vec3(dot(g0,x0),dot(g1,x1),dot(g2,x2));float n=dot(w4,gdx);vec3 w3=w2*w;vec3 dw=-8.0*w3*gdx;vec2 dn0=w4.x*g0+dw.x*x0;vec2 dn1=w4.y*g1+dw.y*x1;vec2 dn2=w4.z*g2+dw.z*x2;g=10.9*(dn0+dn1+dn2);return 10.9*n;}"+a([1,2,4,8],[1,2,4,8])+a([1,2],[1,2])+a([1],[1])+"float th=0.33333333;vec3 rtl(vec3 c){vec3 x=pow(vec3(0.4122214708,0.2119034982,0.0883024619)*c.rrr+vec3(0.5363325363,0.6806995451,0.2817188376)*c.ggg+vec3(0.0514459929,0.1073969566,0.6299787005)*c.bbb,vec3(th,th,th));return vec3(0.2104542553,1.9779984951,0.0259040371)*x.rrr+vec3(0.7936177850,-2.4285922050,0.7827717662)*x.ggg+vec3(-0.0040720468,0.4505937099,-0.8086757660)*x.bbb;}vec3 ltr(vec3 c){vec3 x=c.rrr+vec3(0.3963377774,-0.1055613458,-0.0894841775)*c.ggg+vec3(0.2158037573,-0.0638541728,-1.2914855480)*c.bbb;x=x*x*x;return vec3(4.0767416621,-1.2684380046,-0.0041960863)*x.rrr+vec3(-3.3077115913,2.6097574011,-0.7034186147)*x.ggg+vec3(0.2309699292,-0.3413193965,1.7076147010)*x.bbb;}float cir(in vec2 p,in vec2 l,in float r){return length(p-l)-r;}float sq(in vec2 p,in vec2 l,in vec2 b){vec2 d=abs(p-l)-b;return length(max(d,0.0))+min(max(d.x,d.y),0.0);}float tri(in vec2 p,in vec2 p0,in vec2 p1,in vec2 p2){vec2 e0=p1-p0,e1=p2-p1,e2=p0-p2;vec2 v0=p-p0,v1=p-p1,v2=p-p2;vec2 pq0=v0-e0*clamp(dot(v0,e0)/dot(e0,e0),0.0,1.0);vec2 pq1=v1-e1*clamp(dot(v1,e1)/dot(e1,e1),0.0,1.0);vec2 pq2=v2-e2*clamp(dot(v2,e2)/dot(e2,e2),0.0,1.0);float s=sign(e0.x*e2.y-e0.y*e2.x);vec2 d=min(min(vec2(dot(pq0,pq0),s*(v0.x*e0.y-v0.y*e0.x)),vec2(dot(pq1,pq1),s*(v1.x*e1.y-v1.y*e1.x))),vec2(dot(pq2,pq2),s*(v2.x*e2.y-v2.y*e2.x)));return -sqrt(d.x)*sign(d.y);}int update_col(int cur,int new){int lu[81]=int[](0,1,2,3,4,5,6,7,8,1,0,5,7,6,8,2,3,4,2,5,0,6,7,8,2,3,4,3,5,6,0,8,7,2,3,4,4,5,6,7,0,8,2,3,4,5,5,6,7,8,0,2,3,4,6,5,6,7,8,2,0,3,4,7,5,6,7,8,2,3,0,4,8,5,6,7,8,2,3,4,0);return lu[cur*9+new];}"+f+"float smin(float a,float b,float k){float h=max(k-abs(a-b),0.0)/k;return min(a, b)-h*h*k*(1.0/4.0);}void main(){vec4 fc=vec4(0.0,0.0,0.0,1.0);vec4 xof=vec4(1.0,3.0,-1.0,-3.0)/8.0;vec4 yof=vec4(xof.yzw,xof.x);vec2 g;float c1_dis=fbm1(vec2(0.0,u_t*0.001),0.0,g);c1_dis=smoothstep(0.0,1.0,c1_dis);vec2 c2_pos=vec2(fbm1(vec2(100.0,u_t*0.0001),0.0,g),fbm1(vec2(200.0,u_t*0.0001),0.0,g));c2_pos=pow(abs(c2_pos), vec2(0.75,1.0))*sign(c2_pos)*vec2(0.4,0.65)+vec2(0.5,0.75);vec2 t1_loc[3]=vec2[](vec2(-0.2167,0.0),vec2(0.1833,-0.2),vec2(0.03333,0.2));float t1_sc=1.0/(fbm1(vec2(300.0,u_t*0.0001),0.0,g)*0.5+1.5);g/=length(g);mat2 t1_ro=mat2(g.x,-g.y,g.y,g.x)*mat2(t1_sc,0.0,0.0,t1_sc);for(int i=0;i<4;i++){vec2 pof=vec2(xof[i],yof[i]);"+`vec2 pos=(v_l+pof)/${r(e)};float n=fbm2(pos*200.0,0.0,g);vec2 disp=g*0.0002;int col=0;float dist=10.0;float tdist=0.0;float t_off=0.0;tdist=sq(pos+disp,vec2(0.5,0.75),vec2(0.1,0.6));if(tdist <= 0.0){col=update_col(col,1);dist=smin(dist*2.0, abs(tdist*1.75), 0.05);t_off=1.0;}n=fbm2(pos*20.0,0.0,g);tdist=cir(pos+disp+g*0.002*c1_dis,vec2(0.275,0.275),0.25);if(tdist <= 0.0){col=update_col(col,2);dist=smin(dist*2.0, abs(tdist), 0.05);t_off=0.0;}tdist=cir(pos+disp,c2_pos,0.09);if(tdist <= 0.0){col=update_col(col,3);dist=smin(dist*2.0, abs(tdist*2.0), 0.05);t_off=0.0;}tdist=tri(t1_ro*((pos+disp)-vec2(0.7667,1.2)),t1_loc[0],t1_loc[1],t1_loc[2]);if(tdist <= 0.0){col=update_col(col,4);dist=smin(dist*2.0, abs(tdist*1.75), 0.05);t_off=0.0;}n=fbm4(pos*vec2(120.0,300.0), 0.0, g);vec3 N = normalize(vec3(g, 1.0));vec3 L = normalize(vec3(0.0,0.75,1.0));float s=dot(N,L);vec3 fcol=rtl(get_col(col));fcol.r+=pow(s,3.0)*0.03;s=0.0;float fdist=1.0-pow(1.0-clamp(dist, 0.0, 0.16)*6.25, 2.0);n=fbm4(pos*300.0+float(col)*1000.0+vec2(0.0,u_t*t_off), 0.0, g);n=(n+1.9)/3.8;float l=1.0-smoothstep(n-0.15,n,fdist-0.3);s=max(l*0.025, s);n=fbm4(pos*300.0+float(col)*5000.0+vec2(0.0,u_t*t_off*0.5), 0.0, g);n=(n+1.9)/3.8;l=1.0-smoothstep(n-0.15,n,fdist-0.05);s=max(l*0.05, s);n=fbm4(pos*300.0-float(col)*1000.0+vec2(0.0,u_t*t_off*0.25), 0.0, g);n=(n+1.9)/3.8;l=1.0-smoothstep(n-0.15,n,fdist+0.2);s=max(l*0.1, s);fc.r-=s;fc.rgb+=fcol/4.0;}fc.rgb=ltr(fc.rgb);v_c=fc;}`)(g),o=((e,c,t)=>{let v=e.createProgram();e.attachShader(v,l(e,c,35633)),e.attachShader(v,l(e,t,35632)),e.linkProgram(v);let o=e.getAttribLocation(v,"a_p"),i=e.createBuffer();return e.bindBuffer(34962,i),e.bufferData(34962,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),35044),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,5126,!1,0,0),v})(c,t,v),i=()=>{((e,c,t)=>{e.useProgram(c);let v=((e,c,t)=>e.getUniformLocation(c,"u_t"))(e,c);e.uniform1f(v,t),e.drawArrays(4,0,6)})(c,o,Date.now()/1e3%1e6),requestAnimationFrame(i)};var n;requestAnimationFrame(i)};</script>
  </body>
</html>
